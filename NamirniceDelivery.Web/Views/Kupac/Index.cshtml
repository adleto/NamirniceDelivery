@model NamirniceDelivery.Web.ViewModels.Kupac.IndexViewModel
@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
    int counterPodruznica = 0;
    int counterNamirnica = 0;
}

<div class="text-center row justify-content-center">
    <div>
        <h1>Kupac Panel | <a href="#" @*asp-route-id="@Model.Username"*@>@Model.Username</a></h1>
        <br />
        <h2>Lista podružnica u vašoj blizini</h2>
        <br />
        @if (Model.PodruznicaList.Any())
        {
            <div class="card-deck">
                @foreach (var p in Model.PodruznicaList)
                {
                    counterPodruznica++;
                    <div class="card text-white bg-secondary mb-3 rounded" style="width: 18rem;">
                        <div class="card-body">
                            <h5 class="card-title">@p.Naziv</h5>
                            <p class="card-text">
                                @p.Opis<br />
                                Adresa: @p.Adresa<br />
                            </p>
                            <a href="#" class="btn btn-primary rounded">Posjeti Shop</a>
                        </div>
                    </div>
                    @if (counterPodruznica % 4 == 0)
                    {
                        <div class="w-100 d-none d-md-block d-lg-block"><!-- wrap every 3 on md--></div>
                    }
                }
            </div>
        }
        else
        {
            <p><span>Trenutno ne postoji nijedna podružnica u blizini. :-(</span></p>
        }
        <hr />
    <div class="mt-5">
        <h2>Lista namirnica u ponudi</h2>
        <br />
        @if (Model.NamirnicaList.Any())
        {
            <form action="" method="post">
            <div class="card-deck">
                @foreach (var p in Model.NamirnicaList)
                {
                    counterNamirnica++;
                    <div class="card text-white bg-danger mb-3 rounded" style="width: 18rem;">
                        <div class="card-body">
                            <h5 class="card-title">@p.Namirnica.Naziv</h5>
                            <p class="card-text">
                                Cijena:<br />
                                @((p.CijenaSaPopustom).ToString("F") + "KM")<br />
                                Na stanju: @p.KolicinaNaStanju<br />
                                @if (p.Popust != null)
                                {
                                    <div title="Popust" class="btn btn-warning rounded-circle">-@p.Popust.Iznos.ToString("P1")</div>
                                }
                            </p>
                            <input type="hidden" value="@p.Id" name="namirnicaPodruznicaId" />
                            <input type="number" title="Količina za kupiti" onchange="otkljucaj(@p.Id)" min="0" max="@p.KolicinaNaStanju" step="1" value="0" name="kolicina">
                            <input type="submit" id="@p.Id" class="btn btn-info" value="Brza kupovina" formaction="/Kupac/BrzaKupovina" disabled />
                        </div>
                    </div>
                    @if (counterNamirnica % 4 == 0)
                    {
                        <div class="w-100 d-none d-md-block d-lg-block"><!-- wrap every 3 on md--></div>
                    }
                }
            </div>
            <input type="submit" class="btn btn-success rounded" value="Dodaj odabrane u korpu" formaction="Kupac/KorpaDodaj" />
            </form>
        }
        else
        {
            <p><span>Trenutno ne postoji nijedna namirnica u ponudi. :-(</span></p>
        }
    </div>
    </div>
</div>

<script>
    function otkljucaj(id) {
        var submiter = document.getElementById(id);
        submiter.disabled = false;
    }
</script>

